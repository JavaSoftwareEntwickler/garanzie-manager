{% extends 'base.html' %}

{% block title %}
  Modifica Profilo
{% endblock %}

{% block content %}
  <div class="container mt-5 d-flex justify-content-center">
    <div class="card-form">
      <h3 class="text-center mb-4">Modifica Profilo</h3>

      <!-- Messaggi di Flash -->
      {% include 'message.html' %}

      <form method="POST" action="{{ url_for('edit_profile') }}">
        <!-- CSRF token (se usi Flask-WTF) -->
        {{ form.hidden_tag() }}

        <div class="form-group">
          <label for="username">Username</label>
          <input type="text" class="form-control" id="username" name="username" value="{{ current_user.username }}" disabled />
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" class="form-control" id="email" name="email" value="{{ current_user.email }}" disabled />
        </div>

        <div class="form-group">
          <label for="nome">Nome</label>
          <input type="text" class="form-control" id="nome" name="nome" value="{% if current_user.profilo.nome %}{{ current_user.profilo.nome }}{% endif %}" required />
        </div>

        <div class="form-group">
          <label for="nome">Cognome</label>
          <input type="text" class="form-control" id="cognome" name="cognome" value="{% if current_user.profilo.cognome %}{{ current_user.profilo.cognome }}{% endif %}" required />
        </div>

        <!-- Esempio campo opzionale -->
        <div class="form-group">
          <label for="bio">Biografia (opzionale)</label>
          <textarea class="form-control" id="bibiografiao" name="biografia" rows="3">{% if current_user.profilo.biografia %}{{ current_user.profilo.biografia }}{% endif %}</textarea>
        </div>

        <button type="submit" class="btn btn-primary btn-block">Salva modifiche</button>
        <a href="{{ url_for('profilo') }}" class="btn btn-secondary btn-block mt-2">Annulla</a>
      </form>
    </div>
  </div>
{% endblock %}
